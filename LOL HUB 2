-- ðŸ”¥ LOL HUB - By Dariel
-- LocalScript en StarterGui

-- Servicios
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- Guardar valores originales
local defaultJump = humanoid.JumpPower
local defaultSpeed = humanoid.WalkSpeed

-- Estados de hacks
local jumpBoostEnabled = false
local espEnabled = false

-- Crear ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "LOL_HUB"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = player:WaitForChild("PlayerGui")

-- Crear Frame principal (Hub)
local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 250, 0, 160)
Frame.Position = UDim2.new(0.35, 0, 0.3, 0) -- Centrado
Frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Frame.BackgroundTransparency = 0.2
Frame.Active = true
Frame.Parent = ScreenGui

-- Borde rainbow
local UIStroke = Instance.new("UIStroke")
UIStroke.Parent = Frame
UIStroke.Thickness = 3

local hue = 0
RunService.RenderStepped:Connect(function()
	hue = (hue + 1) % 360
	UIStroke.Color = Color3.fromHSV(hue/360, 1, 1)
end)

-- Hacer Frame draggable
local dragging, dragInput, dragStart, startPos
local function update(input)
	local delta = input.Position - dragStart
	Frame.Position = UDim2.new(
		startPos.X.Scale, startPos.X.Offset + delta.X,
		startPos.Y.Scale, startPos.Y.Offset + delta.Y
	)
end

Frame.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = Frame.Position
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

Frame.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		dragInput = input
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		update(input)
	end
end)

-- Crear botones dentro del Frame
local function crearBoton(text, posY)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(1, -10, 0, 40)
	btn.Position = UDim2.new(0, 5, 0, posY)
	btn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.TextScaled = true
	btn.Font = Enum.Font.SourceSansBold
	btn.Text = text
	btn.Parent = Frame
	return btn
end

local jumpBtn = crearBoton("JUMP BOOST", 5)
local espBtn = crearBoton("ESP", 50)

-- BotÃ³n para abrir/cerrar GUI
local toggleBtn = Instance.new("TextButton")
toggleBtn.Size = UDim2.new(0,120,0,50)
toggleBtn.Position = UDim2.new(0.05, 0, 0.2, 0)
toggleBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
toggleBtn.BackgroundTransparency = 0.3 -- transparente
toggleBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleBtn.TextScaled = true
toggleBtn.Font = Enum.Font.SourceSansBold
toggleBtn.Text = "LOL HUBðŸ”¥"
toggleBtn.Parent = ScreenGui -- âœ… al mismo nivel que Frame

-- Bordes rainbow en el botÃ³n
local btnStroke = Instance.new("UIStroke")
btnStroke.Parent = toggleBtn
btnStroke.Thickness = 3
RunService.RenderStepped:Connect(function()
	local rainbow = Color3.fromHSV(tick() % 8 / 8, 1, 1)
	btnStroke.Color = rainbow
end)

-- Hacer botÃ³n de abrir/cerrar draggable
local dragBtn, dragInputBtn, dragStartBtn, startPosBtn
local function updateBtn(input)
	local delta = input.Position - dragStartBtn
	toggleBtn.Position = UDim2.new(
		startPosBtn.X.Scale, startPosBtn.X.Offset + delta.X,
		startPosBtn.Y.Scale, startPosBtn.Y.Offset + delta.Y
	)
end

toggleBtn.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragBtn = true
		dragStartBtn = input.Position
		startPosBtn = toggleBtn.Position
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragBtn = false
			end
		end)
	end
end)

toggleBtn.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		dragInputBtn = input
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if input == dragInputBtn and dragBtn then
		updateBtn(input)
	end
end)

-- Toggle GUI
local guiVisible = true
toggleBtn.MouseButton1Click:Connect(function()
	guiVisible = not guiVisible
	Frame.Visible = guiVisible
end)

-- Jump Boost funciÃ³n
local function aplicarJumpBoost(humanoid)
	if jumpBoostEnabled then
		humanoid.UseJumpPower = true
		humanoid.JumpPower = 80
		humanoid.WalkSpeed = 40
		jumpBtn.Text = "JUMP BOOST: ONðŸ”¥"
	else
		humanoid.JumpPower = defaultJump
		humanoid.WalkSpeed = defaultSpeed
		jumpBtn.Text = "JUMP BOOST: OFF"
	end
end

jumpBtn.MouseButton1Click:Connect(function()
	jumpBoostEnabled = not jumpBoostEnabled
	aplicarJumpBoost(humanoid)
end)

-- ESP Rainbow lento
local espHue = 0
local function crearESP(plr)
	if plr == player then return end
	local char = plr.Character
	if char and char:FindFirstChild("HumanoidRootPart") then
		local root = char.HumanoidRootPart
		if root:FindFirstChild("ESP") then return end

		local billboard = Instance.new("BillboardGui")
		billboard.Name = "ESP"
		billboard.Adornee = root
		billboard.Size = UDim2.new(0, 120, 0, 60)
		billboard.AlwaysOnTop = true
		billboard.Parent = root

		local textLabel = Instance.new("TextLabel")
		textLabel.Size = UDim2.new(1, 0, 1, 0)
		textLabel.BackgroundTransparency = 1
		textLabel.Text = plr.Name
		textLabel.TextColor3 = Color3.fromRGB(255, 0, 0)
		textLabel.TextScaled = true
		textLabel.Font = Enum.Font.SourceSansBold
		textLabel.Parent = billboard

		RunService.RenderStepped:Connect(function()
			if espEnabled and textLabel then
				espHue = (espHue + 0.002) % 1 -- cambio lento
				textLabel.TextColor3 = Color3.fromHSV(espHue, 1, 1)
			end
		end)
	end
end

espBtn.MouseButton1Click:Connect(function()
	espEnabled = not espEnabled
	if espEnabled then
		espBtn.Text = "ESP: ONðŸ”¥"
		for _, plr in pairs(Players:GetPlayers()) do
			crearESP(plr)
		end
		Players.PlayerAdded:Connect(function(plr)
			plr.CharacterAdded:Connect(function()
				crearESP(plr)
			end)
		end)
	else
		espBtn.Text = "ESP: OFF"
		for _, plr in pairs(Players:GetPlayers()) do
			if plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
				local root = plr.Character.HumanoidRootPart
				if root:FindFirstChild("ESP") then
					root.ESP:Destroy()
				end
			end
		end
	end
end)

-- Mantener hacks activos despuÃ©s de respawn
player.CharacterAdded:Connect(function(char)
	character = char
	humanoid = character:WaitForChild("Humanoid")
	defaultJump = humanoid.JumpPower
	defaultSpeed = humanoid.WalkSpeed
	aplicarJumpBoost(humanoid)
	if espEnabled then
		for _, plr in pairs(Players:GetPlayers()) do
			crearESP(plr)
		end
	end
end)
